{"mappings":"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","sources":["./src/index.js"],"sourcesContent":["window.WordSpeller = function () {\n  return {\n    showSettings: false,\n    selectedWordIndex: 3,\n    inputWords: \"\",\n    words: [],\n    sayWord(index, rate = 1) {\n      speakText(this.words[index].text, 1, rate, 1);\n    },\n    answerWord(index) {\n      let answer = document.getElementById(\"answer_\" + index).value;\n      this.words[index].correct =\n        this.words[index].text.toLowerCase() === answer.toLowerCase();\n      if (this.words[index].correct == false) {\n        playWrongAnswer(index);\n      }\n\n      let gotAllWords = this.words.every((w) => w.correct == true);\n      if (gotAllWords == true) {\n        document.getElementById(\"greatJob-image\").src =\n          this.winningGifs.data[Math.floor(Math.random() * 25)].images.original.url;\n        document.getElementById(\"greatJob\").classList.add(\"is-active\");\n        this.setWords();\n      }\n    },\n    init() {            \n      this.selectedWinGif = this.winGifOptions[Math.floor(Math.random() * this.winGifOptions.length)];\n      this.getWinningGifs();\n    },\n    setWords() {\n      this.words = [];\n      let words = this.inputWords.trim().split(\"\\n\");\n      console.log(words);\n      if (words.length > 0 && words[0] != \"\") {\n        this.words = words.map((w) => {\n          return { text: w, correct: false };\n        });\n      }\n      let answerInputs = document.querySelectorAll(\"[id^='answer_']\");\n      for (const i of answerInputs) {\n        i.value = \"\";\n      }\n    },\n    saveWords() {\n      this.words=[];\n       let words = this.inputWords.split(\"\\n\");\n      localStorage.setItem(\"words\", JSON.stringify(words));\n    },\n    loadWords() {\n      this.words=[];\n      let words = JSON.parse(localStorage.getItem(\"words\"));\n      this.inputWords = words.join(\"\\n\");\n    },\n    selectedWinGif: \"\",\n    winGifOptions : [\"panda\",\"fortnite\",\"funnycats\"],\n    winningGifs: [],\n    getWinningGifs() {\n      fetch(this.selectedWinGif + \".json\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          console.log(data);\n          this.winningGifs = data;\n        });\n    },\n  };\n};\n\n// ref: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Tips#javascript_content\nfunction playWrongAnswer(index) {\n  document.getElementById(\"wordbox_\" + index).className = \"box\";\n  window.requestAnimationFrame(function (time) {\n    window.requestAnimationFrame(function (time) {\n      document.getElementById(\"wordbox_\" + index).className =\n        \"box animate-wrong\";\n    });\n  });\n}\n\nfunction speakText(text, pitch, rate, volume) {\n  // stop any speaking in progress\n  window.speechSynthesis.cancel();\n\n  // create new utterance with all the properties\n  const utterance = new SpeechSynthesisUtterance(text);\n  utterance.pitch = pitch;\n  utterance.rate = rate;\n  utterance.volume = volume;\n\n  var selectedOption = voiceSelect.selectedOptions[0].getAttribute(\"data-name\");\n  for (var i = 0; i < voices.length; i++) {\n    if (voices[i].name === selectedOption) {\n      utterance.voice = voices[i];\n    }\n  }\n\n  // speak that utterance\n  window.speechSynthesis.speak(utterance);\n}\n\nvar synth = window.speechSynthesis;\nvar voices = [];\nvar voiceSelect = document.getElementById(\"voiceSelect\");\n\nfunction populateVoiceList() {\n  // voices = synth.getVoices().sort(function (a, b) {\n  //     const aname = a.name.toUpperCase(), bname = b.name.toUpperCase();\n  //     if (aname < bname) return -1;\n  //     else if (aname == bname) return 0;\n  //     else return +1;\n  // });\n  voices = synth.getVoices();\n  var selectedIndex =\n    voiceSelect.selectedIndex < 0 ? 0 : voiceSelect.selectedIndex;\n  voiceSelect.innerHTML = \"\";\n\n  let findEnglishIdx = 0;\n  for (i = 0; i < voices.length; i++) {\n    var option = document.createElement(\"option\");\n    option.textContent = voices[i].name + \" (\" + voices[i].lang + \")\";\n\n    if (\n      option.textContent.indexOf(\"en-US\") > -1 ||\n      option.textContent.indexOf(\"en_US\") > -1\n    ) {\n      findEnglishIdx = i;\n    }\n\n    if (voices[i].default) {\n      option.textContent += \" -- DEFAULT\";\n    }\n\n    option.setAttribute(\"data-lang\", voices[i].lang);\n    option.setAttribute(\"data-name\", voices[i].name);\n    voiceSelect.appendChild(option);\n  }\n  voiceSelect.selectedIndex = findEnglishIdx;\n}\n\npopulateVoiceList();\nif (\n  typeof speechSynthesis !== \"undefined\" &&\n  speechSynthesis.onvoiceschanged !== undefined\n) {\n  window.speechSynthesis.onvoiceschanged = populateVoiceList;\n}\n"],"names":["speakText","text","pitch","rate","volume","window","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","selectedOption","voiceSelect","selectedOptions","getAttribute","i","voices","length","name","voice","speak","WordSpeller","showSettings","selectedWordIndex","inputWords","words","sayWord","index","arguments","undefined","this","answerWord","answer","document","getElementById","value","correct","toLowerCase","className","requestAnimationFrame","time","playWrongAnswer","every","w","src","winningGifs","data","Math","floor","random","images","original","url","classList","add","setWords","init","selectedWinGif","winGifOptions","getWinningGifs","trim","split","console","log","map","_step","_iterator","$b350cd9db4549ae05bfb23b905ede80$var$_createForOfIteratorHelper","querySelectorAll","s","n","done","err","e","f","saveWords","localStorage","setItem","JSON","stringify","loadWords","parse","getItem","join","_this","fetch","then","response","json","synth","populateVoiceList","getVoices","selectedIndex","innerHTML","findEnglishIdx","option","createElement","textContent","lang","indexOf","default","setAttribute","appendChild","onvoiceschanged"],"version":3,"file":"wordspeller.b0bd42db.js.map"}